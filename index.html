<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Goal Garden 3.0 ‚Äì Fejedelem Edition üåøüî•</title>
<style>
body {
  font-family: 'Segoe UI', sans-serif;
  background: linear-gradient(to bottom right,#e8f5e9,#f1f8e9);
  margin: 0;
  padding: 0;
  color: #222;
}
header {
  background: white;
  border-bottom: 1px solid #ddd;
  position: sticky;
  top: 0;
  z-index: 10;
  padding: 10px 20px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
#app {
  max-width: 1150px;
  margin: 20px auto;
  padding: 10px;
}
button {
  background: #222;
  color: white;
  border: none;
  border-radius: 8px;
  padding: 8px 14px;
  cursor: pointer;
  transition: 0.2s;
}
button:hover { background: #444; }
input, textarea, select {
  width: 100%;
  padding: 8px;
  border: 1px solid #ccc;
  border-radius: 8px;
  font-size: 14px;
}
.card {
  background: white;
  border-radius: 15px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  margin: 10px 0;
  padding: 15px 20px;
  position: relative;
}
.card h3 { margin: 0; }
.card p { margin: 5px 0 10px; color:#444; }

.owner-tabs { display: flex; gap: 8px; margin-bottom: 10px; }
.owner-tabs button {
  flex: 1;
  background: #eee;
  color: #222;
}
.owner-tabs button.active {
  background: #222;
  color: white;
}

.stats {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: space-between;
  background: white;
  border-radius: 12px;
  padding: 15px;
  box-shadow: 0 1px 4px rgba(0,0,0,0.1);
  margin-bottom: 20px;
}
.stats div { flex: 1; min-width: 140px; text-align:center; }

#dailyTracker {
  display: grid;
  grid-template-columns: repeat(auto-fit,minmax(250px,1fr));
  gap: 15px;
  margin-bottom: 20px;
}
.tracker-box {
  background:white;
  border-radius:12px;
  box-shadow:0 2px 5px rgba(0,0,0,0.1);
  padding:15px;
}
.tracker-box h4 { margin-top:0; }

.progress { height: 6px; background: #eee; border-radius: 3px; overflow: hidden; margin-top: 8px; }
.progress-inner { height: 100%; background: #16a34a; transition: width 0.3s; }

.log {
  background:white;
  border-radius:12px;
  box-shadow:0 1px 4px rgba(0,0,0,0.1);
  padding:10px 15px;
  margin-top:20px;
  max-height:200px;
  overflow:auto;
  font-size:13px;
}

.tip-box {
  background: #fef9c3;
  border-left: 5px solid #facc15;
  border-radius: 10px;
  padding: 10px 15px;
  margin-bottom: 15px;
  font-size: 15px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}
.tip-box strong { color: #92400e; }

#weightLog {
  background:white;
  border-radius:12px;
  padding:15px;
  box-shadow:0 2px 5px rgba(0,0,0,0.1);
}
#weightLog input { margin-bottom: 10px; }

footer {
  text-align:center;
  padding: 10px;
  font-size: 13px;
  color: #555;
  margin-top: 20px;
}
</style>
</head>
<body>
<header>
  <h2>üåø Goal Garden 3.0 ‚Äì Fejedelem Edition</h2>
  <button id="addGoalBtn">+ √öj c√©l</button>
</header>

<div id="app">
  <div class="owner-tabs">
    <button id="tabAll" class="active">üåç Mind</button>
    <button id="tabEduard">üß† Eduard</button>
    <button id="tabBoroka">üíñ Bor√≥ka</button>
  </div>

  <div class="stats">
    <div>üéØ Akt√≠v c√©lok: <b id="statActive">0</b></div>
    <div>‚úÖ Teljes√≠tve: <b id="statPercent">0%</b></div>
    <div>‚≠ê Pontjaid: <b id="statPoints">0</b></div>
    <div>‚öñÔ∏è Tests√∫ly: <b id="currentWeight">-</b></div>
    <div>üî• Napi kal√≥ria limit: <b id="dailyCalLimit">-</b></div>
  </div>

  <div class="tip-box">
    <strong>Mai tipp:</strong> <span id="dailyTip">Bet√∂lt√©s...</span>
  </div>

  <div id="dailyTracker">
    <div class="tracker-box">
      <h4>üíß V√≠zfogyaszt√°s</h4>
      <input type="number" id="waterInput" placeholder="liter / nap" min="0" step="0.1">
      <button onclick="addWater()">Ment√©s</button>
      <p>√ñsszesen ma: <b id="waterTotal">0L</b></p>
    </div>

    <div class="tracker-box">
      <h4>üçΩÔ∏è Kal√≥riabevitel</h4>
      <input type="number" id="calInput" placeholder="kal√≥ria / √©tkez√©s">
      <button onclick="addCalories()">Hozz√°ad√°s</button>
      <p>Mai √∂sszesen: <b id="calTotal">0 kcal</b></p>
      <div class="progress"><div id="calBar" class="progress-inner" style="width:0%;"></div></div>
    </div>

    <div class="tracker-box" id="weightLog">
      <h4>‚öñÔ∏è S√∫ly napl√≥</h4>
      <input type="number" id="weightInput" placeholder="Aktu√°lis s√∫ly (kg)">
      <button onclick="saveWeight()">Ment√©s</button>
      <p>Utols√≥ mentett: <b id="lastWeight">-</b></p>
    </div>
  </div>

  <div id="goals"></div>

  <div class="log">
    <h4>üìú Napl√≥</h4>
    <div id="logEntries"></div>
  </div>
</div>

<footer>Fejedelem Edition üåø N√≥ra t√°mogat√°s√°val üíö</footer>
<script>
// --- Alap adatok √©s inicializ√°l√°s ---
let tips = [
  "Igy√°l egy nagy poh√°r vizet minden √©tkez√©s el≈ëtt ‚Äì kevesebbet fogsz enni.",
  "Haszn√°lj kisebb t√°ny√©rt ‚Äì automatikusan kevesebbet eszel.",
  "Ne igy√°l kal√≥ri√°t: felejtsd el az √ºd√≠t≈ëket, gy√ºm√∂lcsleveket.",
  "Egy√©l lassan ‚Äì 20 perc kell, mire az agyad jelzi, hogy tele vagy.",
  "Reggel egy poh√°r v√≠z + mozg√°s = anyagcsere turb√≥!",
  "Ne nassolj unalomb√≥l. Ink√°bb s√©t√°lj 5 percet.",
  "Ker√ºld a cukrot ‚Äì f≈ëleg a rejtett cukrokat a sz√≥szokban.",
  "Z√∂ld tea = term√©szetes zs√≠r√©get≈ë. Pr√≥b√°ld ki d√©lut√°n!",
  "Aludj legal√°bb 7 √≥r√°t ‚Äì a kev√©s alv√°s √©hs√©get okoz.",
  "Ne koplalj ‚Äì csak egy kis kal√≥riadeficit kell, napi 500 k√∂r√ºl.",
  "Egy√©l feh√©rj√©t minden √©tkez√©shez ‚Äì izmot v√©desz, zs√≠rt √©getsz.",
  "Ker√ºld az esti nassol√°st. Este csak k√∂nny≈± feh√©rje + z√∂lds√©g.",
  "T√∂bb s√©ta = t√∂bb zs√≠r√©get√©s. 10.000 l√©p√©s a c√©l.",
  "Ha elrontod a napot, ne add fel. M√°snap √∫jrakezded!",
  "F√≥kusz√°lj az el≈ërehalad√°sra, ne a t√∂k√©letess√©gre.",
  "Igy√°l 2.5‚Äì3 liter vizet naponta.",
  "Ne egy√©l 2-3 √≥r√°val lefekv√©s el≈ëtt.",
  "M√©rd magad hetente, ne naponta.",
  "K√°v√© √©hgyomorra ‚Äì anyagcsere gyors√≠t√≥.",
  "Hideg zuhany 30 m√°sodpercig ‚Äì hormon√°lis reset.",
  "F≈±szerezd az √©teleid chilis f≈±szerekkel ‚Äì gyors√≠tj√°k az anyagcser√©t.",
  "Tarts 16/8-as b√∂jt√∂t ‚Äì csak 12 √©s 20 √≥ra k√∂z√∂tt egy√©l.",
  "Ne hagyd ki a reggelit, ha farkas√©hes vagy.",
  "L√©gy k√∂vetkezetes, nem t√∂k√©letes ‚Äì ez a kulcs.",
  "Jutalmazd magad, ha el√©rsz egy c√©lt ‚Äì dopamin t√°mogat√°s.",
  "K√©sz√≠ts √©tkez√©si tervet, ne d√∂ntsd el √©hesen mit eszel.",
  "T√∂bb rost = telts√©g√©rzet. Z√∂lds√©gek, chia, zabpehely.",
  "Ne f√©lj a zs√≠rt√≥l, de v√°laszd az eg√©szs√©geset: ol√≠va, avok√°d√≥.",
  "Alv√°s el≈ëtt ny√∫jt√°s ‚Äì stresszcs√∂kkent√©s, jobb regener√°ci√≥.",
  "Ne stresszelj ‚Äì a stressz h√≠zlal, nem a t√©szta.",
  "T√∂bb feh√©rje, kevesebb liszt = gyorsabb zs√≠r√©get√©s.",
  "Tarts hetente 1 csal√≥napot ‚Äì anyagcser√©d h√°l√°s lesz.",
  "√Ållj fel √≥r√°nk√©nt, ha sokat √ºlsz.",
  "Ne sz√°mold a kal√≥ri√°t k√©nyszeresen ‚Äì ink√°bb √©rtsd meg az ar√°nyokat.",
  "Ha √©hes vagy, igy√°l vizet ‚Äì lehet, hogy nem is √©hs√©g.",
  "Alv√°s az igazi zs√≠r√©get≈ë id≈ë.",
  "Ne a m√©rleget n√©zd, hanem a t√ºk√∂rk√©pet.",
  "Mindig legyen n√°lad v√≠z.",
  "A k√∂vetkezetess√©g mindig legy≈ëzi a motiv√°ci√≥t.",
  "L√©gy b√ºszke magadra minden apr√≥ eredm√©ny√©rt."
];

let water = parseFloat(localStorage.getItem("water") || "0");
let calories = parseInt(localStorage.getItem("calories") || "0");
let weightHistory = JSON.parse(localStorage.getItem("weights") || "[]");
let dailyLimit = 1800;
let today = new Date().toDateString();

// Reset napi √©rt√©keket √∫j napkor
if (localStorage.getItem("lastDay") !== today) {
  water = 0;
  calories = 0;
  localStorage.setItem("lastDay", today);
}

document.getElementById("waterTotal").textContent = water + "L";
document.getElementById("calTotal").textContent = calories + " kcal";
document.getElementById("dailyCalLimit").textContent = dailyLimit + " kcal";

// --- Napi tipp kijelz√©s ---
function loadDailyTip() {
  const day = new Date().getDate();
  const tip = tips[day % tips.length];
  document.getElementById("dailyTip").textContent = tip;
}
loadDailyTip();

// --- V√≠zfogyaszt√°s ---
function addWater() {
  let val = parseFloat(document.getElementById("waterInput").value);
  if (isNaN(val) || val <= 0) return alert("Adj meg egy √©rv√©nyes litermennyis√©get!");
  water += val;
  localStorage.setItem("water", water);
  document.getElementById("waterTotal").textContent = water.toFixed(1) + "L";
  addLog(`üíß Itt√°l ${val} litert. √ñsszesen: ${water.toFixed(1)}L`);
  document.getElementById("waterInput").value = "";
}

// --- Kal√≥riabevitel ---
function addCalories() {
  let val = parseInt(document.getElementById("calInput").value);
  if (isNaN(val) || val <= 0) return alert("Adj meg √©rv√©nyes kal√≥ri√°t!");
  calories += val;
  localStorage.setItem("calories", calories);
  document.getElementById("calTotal").textContent = calories + " kcal";
  let percent = Math.min((calories / dailyLimit) * 100, 100);
  document.getElementById("calBar").style.width = percent + "%";
  addLog(`üçΩÔ∏è Ett√©l ${val} kal√≥ri√°t. √ñsszesen: ${calories} kcal`);
  document.getElementById("calInput").value = "";
}

// --- Tests√∫ly napl√≥ ---
function saveWeight() {
  let val = parseFloat(document.getElementById("weightInput").value);
  if (isNaN(val) || val <= 0) return alert("Adj meg egy √©rv√©nyes s√∫lyt!");
  weightHistory.push({ date: new Date().toLocaleDateString(), weight: val });
  localStorage.setItem("weights", JSON.stringify(weightHistory));
  document.getElementById("lastWeight").textContent = val + " kg";
  document.getElementById("currentWeight").textContent = val + " kg";
  addLog(`‚öñÔ∏è S√∫ly mentve: ${val} kg`);
  document.getElementById("weightInput").value = "";
}

// --- Napl√≥ logika ---
let logs = JSON.parse(localStorage.getItem("log_v6") || "[]");
function addLog(txt) {
  logs.unshift({ time: new Date().toLocaleString(), text: txt });
  if (logs.length > 100) logs.pop();
  localStorage.setItem("log_v6", JSON.stringify(logs));
  renderLog();
}
function renderLog() {
  document.getElementById("logEntries").innerHTML = logs.map(l => 
    `<div>üïì ${l.time}: ${l.text}</div>`
  ).join('');
}
renderLog();

// --- S√∫ly bet√∂lt√©s ---
if (weightHistory.length > 0) {
  const last = weightHistory[weightHistory.length - 1].weight;
  document.getElementById("lastWeight").textContent = last + " kg";
  document.getElementById("currentWeight").textContent = last + " kg";
}

// --- Kal√≥ria s√°v indul√°skor ---
document.getElementById("calBar").style.width = Math.min((calories / dailyLimit) * 100, 100) + "%";

// Ide j√∂n majd a c√©lkezel√©s (3. r√©sz)
// --- C√©lok √©s jutalmak t√°rol√°sa ---
let goals = JSON.parse(localStorage.getItem('goals_v6') || '[]');
let rewards = JSON.parse(localStorage.getItem('rewards_v6') || '[]');
let points = parseInt(localStorage.getItem('points_v6') || '0');
let currentOwner = 'Mind';

const app = document.getElementById('goals');
const statActive = document.getElementById('statActive');
const statPercent = document.getElementById('statPercent');
const statPoints = document.getElementById('statPoints');

// --- Ment√©s ---
function saveAll() {
  localStorage.setItem('goals_v6', JSON.stringify(goals));
  localStorage.setItem('rewards_v6', JSON.stringify(rewards));
  localStorage.setItem('points_v6', points);
}

// --- Statisztika friss√≠t√©s ---
function renderStats() {
  const active = goals.filter(g => !g.done).length;
  const done = goals.filter(g => g.done).length;
  const total = goals.length || 1;
  statActive.textContent = active;
  statPercent.textContent = Math.round((done / total) * 100) + '%';
  statPoints.textContent = points;
}
renderStats();

// --- Sz√≠n logika tulajdonos szerint ---
function colorByOwner(o) {
  if (o === 'Eduard') return '#a7f3d0';
  if (o === 'Bor√≥ka') return '#fbcfe8';
  return '#bfdbfe';
}

// --- C√©lok megjelen√≠t√©se ---
function renderGoals() {
  app.innerHTML = '';
  const filtered = goals.filter(g => currentOwner === 'Mind' || g.owner === currentOwner);
  filtered.forEach(g => {
    const card = document.createElement('div');
    card.className = 'card';
    card.style.borderLeft = `8px solid ${colorByOwner(g.owner)}`;
    const doneCount = g.subtasks.filter(s => s.done).length;
    const prog = Math.round((doneCount / g.subtasks.length) * 100);
    card.innerHTML = `
      <div class='goal-owner'>${g.owner}</div>
      <h3>${g.title}</h3>
      <p>${g.desc || ''}</p>
    `;
    const subDiv = document.createElement('div');
    g.subtasks.forEach((s) => {
      const row = document.createElement('div');
      row.className = 'subtask';
      const chk = document.createElement('input');
      chk.type = 'checkbox';
      chk.checked = s.done;
      chk.onchange = () => {
        s.done = !s.done;
        if (s.done) {
          if (s.points > 0) points += parseInt(s.points);
          addLog(`‚úÖ Alc√©l teljes√≠tve: ${s.text} (+${s.points} pont)`);
        } else {
          if (s.points > 0) points -= parseInt(s.points);
          addLog(`‚Ü©Ô∏è Alc√©l visszavonva: ${s.text} (-${s.points} pont)`);
        }
        g.done = g.subtasks.every(x => x.done);
        saveAll(); renderAll();
      };
      const span = document.createElement('span');
      span.textContent = `${s.text} (${s.points}p)`;
      row.append(chk, span);
      subDiv.append(row);
    });
    card.append(subDiv);

    const pr = document.createElement('div');
    pr.className = 'progress';
    pr.innerHTML = `<div class='progress-inner' style='width:${prog}%;'></div>`;
    card.append(pr);

    const icons = document.createElement('div');
    icons.className = 'icons';
    const editBtn = document.createElement('button'); editBtn.innerHTML = '‚úèÔ∏è'; editBtn.onclick = () => editGoal(g.id);
    const delBtn = document.createElement('button'); delBtn.innerHTML = 'üóëÔ∏è'; delBtn.onclick = () => { if (confirm('Biztos t√∂rl√∂d?')) { goals = goals.filter(x => x.id !== g.id); saveAll(); renderAll(); } };
    icons.append(editBtn, delBtn);
    card.append(icons);
    app.append(card);
  });
}

// --- √öj c√©l hozz√°ad√°sa ---
const addGoalBtn = document.getElementById('addGoalBtn');
addGoalBtn.onclick = () => {
  const title = prompt('C√©l c√≠me:');
  if (!title) return;
  const desc = prompt('R√∂vid le√≠r√°s:');
  const owner = prompt('Kinek a c√©lja? (Eduard / Bor√≥ka / Mindkett≈ë)', 'Eduard');
  const subtasks = [];
  let addMore = true;
  while (addMore) {
    const subName = prompt('Alc√©l neve: (vagy hagyd √ºresen a kil√©p√©shez)');
    if (!subName) break;
    const pts = parseInt(prompt('Pont√©rt√©k (0 is lehet):', '10')) || 0;
    subtasks.push({ text: subName, points: pts, done: false });
    addMore = confirm('Szeretn√©l m√©g egy alc√©lt hozz√°adni?');
  }
  const goal = { id: Date.now(), title, desc, owner, subtasks, done: false };
  goals.unshift(goal);
  addLog(`‚ûï √öj c√©l: ${goal.title}`);
  saveAll(); renderAll();
};

// --- Szerkeszt√©s ---
function editGoal(id) {
  const g = goals.find(x => x.id === id);
  if (!g) return;
  const newTitle = prompt('√öj c√≠m:', g.title);
  if (newTitle) g.title = newTitle;
  const newDesc = prompt('√öj le√≠r√°s:', g.desc);
  if (newDesc) g.desc = newDesc;
  addLog(`‚úèÔ∏è C√©l friss√≠tve: ${g.title}`);
  saveAll(); renderAll();
}

// --- Megjelen√≠t√©s ---
function renderAll() {
  renderGoals();
  renderStats();
  renderLog();
}
renderAll();

// --- Tulajdonos sz≈±r≈ë ---
document.getElementById('tabAll').onclick = () => { currentOwner = 'Mind'; setTab('tabAll'); };
document.getElementById('tabEduard').onclick = () => { currentOwner = 'Eduard'; setTab('tabEduard'); };
document.getElementById('tabBoroka').onclick = () => { currentOwner = 'Bor√≥ka'; setTab('tabBoroka'); };

function setTab(id) {
  ['tabAll', 'tabEduard', 'tabBoroka'].forEach(x => document.getElementById(x).classList.remove('active'));
  document.getElementById(id).classList.add('active');
  renderGoals();
}

</script>
</body>
</html>
